<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ficha RPG - Candela Obscura</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="fichas-manager.css" />
  <script type="module" src="./script.js"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Cormorant+Unicase:wght@300;400;500;600;700&family=Jim+Nightshade&display=swap');
  </style>

  <!-- REMOVA TODO ESTE BLOCO DE SCRIPT DUPLICADO -->
  <!--
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
    import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js";
    import { getFirestore } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";
    import { firebaseConfig } from "./firebase-config.js";
    // Inicializa Firebase
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    onAuthStateChanged(auth, user => {
      if (!user) {
        // Se não estiver logado, redireciona para login
        window.location.href = 'login.html';
      }
    });

    // Botão Logout
    const logoutBtn = document.getElementById('logoutBtn');
    logoutBtn.addEventListener('click', async () => {
      await signOut(auth);
      window.location.href = 'login.html';
    });

    const db = getFirestore(app);
    // Exporta para usar em outros scripts
    window.firebaseApp = app;
    window.firebaseAuth = auth;
    window.firebaseDB = db;
  </script>
  -->

</head>

<body>
  <main class="ficha">
    <!-- Cabeçalho -->
    <header class="ficha-header">
      <div class="logo">CANDELA OBSCURA</div>
      <div class="header-buttons">
        <!-- Simulador de Dados -->
        <button id="btnSimuladorDados" class="btn-simulador">Dados ▼</button>
        <div id="menuSimuladorDados" class="menu-simulador" style="display:none;">
          <button data-lados="4">D4</button>
          <button data-lados="6">D6</button>
          <button data-lados="8">D8</button>
          <button data-lados="12">D12</button>
          <button data-lados="20">D20</button>
          <button data-lados="100">D100</button>
        </div>
        <!-- Botão Logout -->
        <button id="logoutBtn" class="btn-logout">Logout</button>
      </div>

      <!-- REMOVA ESTA LINHA: <div><button type="button" id="btnSalvarFicha">Salvar Ficha</button></div> -->

      <section id="fichasManager" class="fichas-manager">
        <h2>Minhas Fichas</h2>
        <ul id="listaFichas" class="lista-fichas">
          <!-- Lista de fichas será preenchida dinamicamente -->
        </ul>
        <button id="btnNovaFicha" class="btn-nova-ficha">+ Nova Ficha</button>
      </section>

      <form id="fichaForm">
        <div class="dados-gerais">
          <label>Nome: <input type="text" name="nome" /></label>
          <label>Papel: <input type="text" name="papel" /></label>
          <label>Espec: <input type="text" name="espec" /></label>
          <label>Círculo: <input type="text" name="circulo" /></label>
          <label>Plano: <input type="text" name="plano" /></label>
          <label>Religião: <input type="text" name="religiao" /></label>
        </div>

        <!-- Corpo, Astúcia, Intuição -->
        <section class="atributos">
          <div class="atributo" id="corpo">
            <div class="titulo-impulsos-container">
              <div class="titulo-e-maximo">
              <h2>Corpo</h2>
              <label class="max-impulsos-control">
                Impulsos:
                <input type="number" min="1" max="9" value="1" class="max-impulsos-input" data-atributo="corpo" />
              </label>
              </div>
              <div class="impulsos-checkboxes">
                <input type="checkbox" name="corpo_impulso_1" class="checkbox-impulso" />
                <input type="checkbox" name="corpo_impulso_2" class="checkbox-impulso" />
                <input type="checkbox" name="corpo_impulso_3" class="checkbox-impulso" />
                <input type="checkbox" name="corpo_impulso_4" class="checkbox-impulso" />
                <input type="checkbox" name="corpo_impulso_5" class="checkbox-impulso" />
                <input type="checkbox" name="corpo_impulso_6" class="checkbox-impulso" />
                <input type="checkbox" name="corpo_impulso_7" class="checkbox-impulso" />
                <input type="checkbox" name="corpo_impulso_8" class="checkbox-impulso" />
                <input type="checkbox" name="corpo_impulso_9" class="checkbox-impulso" />
              </div>
            </div>
            <hr class="separador-impulsos-acoes" />
            <label><input type="checkbox" class="dourado-checkbox"> Mover <small>(Correr, Desviar, Guiar)</small>
              <br>
              <input type="checkbox" class="checkbox-acao"> <input type="checkbox" class="checkbox-acao"> <input
                type="checkbox" class="checkbox-acao"> <input type="checkbox" class="checkbox-acao"> <input
                type="checkbox" class="checkbox-acao"> <input type="checkbox" class="checkbox-acao"> <input
                type="checkbox" class="checkbox-acao">
            </label>

            <label><input type="checkbox" class="dourado-checkbox"> Atacar <small>(Socar, Quebrar, Derrubar)</small>
              <br>
              <input type="checkbox" class="checkbox-acao"> <input type="checkbox" class="checkbox-acao"> <input
                type="checkbox" class="checkbox-acao"> <input type="checkbox" class="checkbox-acao"> <input
                type="checkbox" class="checkbox-acao"> <input type="checkbox" class="checkbox-acao"> <input
                type="checkbox" class="checkbox-acao">
            </label>
            <label><input type="checkbox" class="dourado-checkbox"> Controlar <small>(Dirigir, Atirar, Finesse)</small>
              <br>
              <input type="checkbox" class="checkbox-acao"> <input type="checkbox" class="checkbox-acao"> <input
                type="checkbox" class="checkbox-acao"> <input type="checkbox" class="checkbox-acao"> <input
                type="checkbox" class="checkbox-acao"> <input type="checkbox" class="checkbox-acao"> <input
                type="checkbox" class="checkbox-acao">
            </label>
          </div>
          <div class="atributo" id="astucia">
            <div class="titulo-impulsos-container">
              <div class="titulo-e-maximo">
              <h2>Astúcia</h2>
              <label class="max-impulsos-control">
                Impulsos:
                <input type="number" min="1" max="9" value="1" class="max-impulsos-input" data-atributo="astucia" />
              </label>
              </div>
              <div class="impulsos-checkboxes">
                <input type="checkbox" name="astucia_impulso_1" class="checkbox-impulso" />
                <input type="checkbox" name="astucia_impulso_2" class="checkbox-impulso" />
                <input type="checkbox" name="astucia_impulso_3" class="checkbox-impulso" />
                <input type="checkbox" name="astucia_impulso_4" class="checkbox-impulso" />
                <input type="checkbox" name="astucia_impulso_5" class="checkbox-impulso" />
                <input type="checkbox" name="astucia_impulso_6" class="checkbox-impulso" />
                <input type="checkbox" name="astucia_impulso_7" class="checkbox-impulso" />
                <input type="checkbox" name="astucia_impulso_8" class="checkbox-impulso" />
                <input type="checkbox" name="astucia_impulso_9" class="checkbox-impulso" />
              </div>
            </div>
            <hr class="separador-impulsos-acoes" />
            <label><input type="checkbox" class="dourado-checkbox"> Persuadir <small>(Convencer, Liderar)</small>
              <br>
              <input type="checkbox" class="checkbox-acao"> <input type="checkbox" class="checkbox-acao"> <input
                type="checkbox" class="checkbox-acao"> <input type="checkbox" class="checkbox-acao"> <input
                type="checkbox" class="checkbox-acao"> <input type="checkbox" class="checkbox-acao"> <input
                type="checkbox" class="checkbox-acao">
            </label>
            <label><input type="checkbox" class="dourado-checkbox"> Ler <small>(Linguagem Corporal, Identificar
                Mentiras)</small>
              <br>
              <input type="checkbox" class="checkbox-acao"> <input type="checkbox" class="checkbox-acao"> <input
                type="checkbox" class="checkbox-acao"> <input type="checkbox" class="checkbox-acao"> <input
                type="checkbox" class="checkbox-acao"> <input type="checkbox" class="checkbox-acao"> <input
                type="checkbox" class="checkbox-acao">
            </label>
            <label><input type="checkbox" class="dourado-checkbox"> Esconder <small>(Esgueirar-se, Disfarçar,
                Enganar)</small>
              <br>
              <input type="checkbox" class="checkbox-acao"> <input type="checkbox" class="checkbox-acao"> <input
                type="checkbox" class="checkbox-acao"> <input type="checkbox" class="checkbox-acao"> <input
                type="checkbox" class="checkbox-acao"> <input type="checkbox" class="checkbox-acao"> <input
                type="checkbox" class="checkbox-acao">
            </label>
          </div>
          <div class="atributo" id="intuicao">
            <div class="titulo-impulsos-container">
              <div class="titulo-e-maximo">
              <h2>Intuição</h2>
              <label class="max-impulsos-control">
                Impulsos:
                <input type="number" min="1" max="9" value="1" class="max-impulsos-input" data-atributo="intuicao" />
              </label>
              </div>
              <div class="impulsos-checkboxes">
                <input type="checkbox" name="intuicao_impulso_1" class="checkbox-impulso" />
                <input type="checkbox" name="intuicao_impulso_2" class="checkbox-impulso" />
                <input type="checkbox" name="intuicao_impulso_3" class="checkbox-impulso" />
                <input type="checkbox" name="intuicao_impulso_4" class="checkbox-impulso" />
                <input type="checkbox" name="intuicao_impulso_5" class="checkbox-impulso" />
                <input type="checkbox" name="intuicao_impulso_6" class="checkbox-impulso" />
                <input type="checkbox" name="intuicao_impulso_7" class="checkbox-impulso" />
                <input type="checkbox" name="intuicao_impulso_8" class="checkbox-impulso" />
                <input type="checkbox" name="intuicao_impulso_9" class="checkbox-impulso" />
              </div>
            </div>
            <hr class="separador-impulsos-acoes" />
            <label><input type="checkbox" class="dourado-checkbox"> Investigar <small>(Pesquisar, Rastrear,
                Localizar)</small>
              <br>
              <input type="checkbox" class="checkbox-acao"> <input type="checkbox" class="checkbox-acao"> <input
                type="checkbox" class="checkbox-acao"> <input type="checkbox" class="checkbox-acao"> <input
                type="checkbox" class="checkbox-acao"> <input type="checkbox" class="checkbox-acao"> <input
                type="checkbox" class="checkbox-acao">
            </label>
            <label><input type="checkbox" class="dourado-checkbox"> Focar <small>(Inspecionar, Analisar,
                Lembrar)</small>
              <br>
              <input type="checkbox" class="checkbox-acao"> <input type="checkbox" class="checkbox-acao"> <input
                type="checkbox" class="checkbox-acao"> <input type="checkbox" class="checkbox-acao"> <input
                type="checkbox" class="checkbox-acao"> <input type="checkbox" class="checkbox-acao"> <input
                type="checkbox" class="checkbox-acao">
            </label>
            <label><input type="checkbox" class="dourado-checkbox"> Sentir <small>(Ocultismo, Canalizar,
                Revelar)</small>
              <br>
              <input type="checkbox" class="checkbox-acao"> <input type="checkbox" class="checkbox-acao"> <input
                type="checkbox" class="checkbox-acao"> <input type="checkbox" class="checkbox-acao"> <input
                type="checkbox" class="checkbox-acao"> <input type="checkbox" class="checkbox-acao"> <input
                type="checkbox" class="checkbox-acao">
            </label>
          </div>
        </section>

        <!-- Papel e Especialidade -->
        <section class="papel-especialidade">
          <h3>Habilidades do Papel</h3>
          <textarea name="papelDescricao" rows="6"></textarea>

          <h3>Habilidades da Especialidade</h3>
          <textarea name="especialidade" rows="10"></textarea>
        </section>

        <!-- Marcas e Cicatrizes -->
        <div class="marcas-cicatrizes-container">
          <div class="section marcas">
            <div class="header-black">
              <h2>MARCAS</h2>
            </div>
            <div class="marcas-conteudo">
              <!-- Categorias de marcas aqui -->
              <div class="categoria" data-categoria="corpo">
                <h3>CORPO</h3>
                <label class="max-marcas-control">
                  Máximo de marcas:
                  <input type="number" min="1" max="20" value="3" class="max-marcas-input" />
                </label>
                <ul class="marcas-lista"></ul>
              </div>
              <div class="categoria" data-categoria="mente">
                <h3>MENTE</h3>
                <label class="max-marcas-control">
                  Máximo de marcas:
                  <input type="number" min="1" max="20" value="3" class="max-marcas-input" />
                </label>
                <ul class="marcas-lista"></ul>
              </div>
              <div class="categoria" data-categoria="sangria">
                <h3>SANGRIA</h3>
                <label class="max-marcas-control">
                  Máximo de marcas:
                  <input type="number" min="1" max="20" value="3" class="max-marcas-input" />
                </label>
                <ul class="marcas-lista"></ul>
              </div>
            </div>
          </div>

          <div class="section cicatrizes">
            <div class="header-black">
              <h2>CICATRIZES</h2>
            </div>
            <div class="cicatrizes-conteudo">
              <p>Marque suas cicatrizes e descreva-as:</p>
              <div class="linha-cicatriz">
                <input type="checkbox" name="cicatriz_1" id="cicatriz_1" />
                <label for="cicatriz_1">Cicatriz</label>
                <input type="text" name="desc_cicatriz_1" placeholder="Descrição da cicatriz 1" />
              </div>
              <div class="linha-cicatriz">
                <input type="checkbox" name="cicatriz_2" id="cicatriz_2" />
                <label for="cicatriz_2">Cicatriz</label>
                <input type="text" name="desc_cicatriz_2" placeholder="Descrição da cicatriz 2" />
              </div>
              <div class="linha-cicatriz">
                <input type="checkbox" name="cicatriz_3" id="cicatriz_3" />
                <label for="cicatriz_3">Cicatriz</label>
                <input type="text" name="desc_cicatriz_3" placeholder="Descrição da cicatriz 3" />
              </div>
            </div>
          </div>

        </div>

        <!-- Relacionamentos, Equipamento e Notas -->
        <div class="relacionamentos-e-equipamento-container">
          <div class="subsection relacionamentos">
            <h3>RELACIONAMENTOS</h3>
            <ul class="lista-relacionamento">
              <li><input type="text"></li>
              <li><input type="text"></li>
              <li><input type="text"></li>
              <li><input type="text"></li>
              <li><input type="text"></li>
              <li><input type="text"></li>
              <li><input type="text"></li>
              <li><input type="text"></li>
              <li><input type="text"></li>
            </ul>
          </div>
          <div class="subsection equipamento">
            <h3>EQUIPAMENTO</h3>
            <p>Durante cada atribuição, escolha até três.</p>
            <ul class="lista-equipamento">
              <li><input type="checkbox"> <input type="text"></li>
              <li><input type="checkbox"> <input type="text"></li>
              <li><input type="checkbox"> <input type="text"></li>
              <li><input type="checkbox"> <input type="text"></li>
              <li><input type="checkbox"> <input type="text"></li>
              <li><input type="checkbox"> <input type="text"></li>
            </ul>
          </div>
        </div>

        <div class="notas-e-circulo-container">
          <div class="subsection notas">
            <h3>NOTAS</h3>
            <textarea rows="5" cols="40" placeholder="Escreva suas anotações aqui..."></textarea>
          </div>
          <div class="subsection habilidades-circulo">
            <h3>HABILIDADES DE CÍRCULO</h3>
            <textarea rows="5" cols="40" placeholder="Descreva as habilidades de círculo aqui..."></textarea>
          </div>
        </div>
        <button type="submit">Salvar Ficha</button>
      </form>
    </header>
  </main>

  <!-- Modal para mostrar resultado do dado -->
  <div id="modalDado" class="modal-dado">
    <div class="modal-content">
      <span id="fecharModal" class="fechar">&times;</span>
      <p id="resultadoDado" class="resultado-dado-text"></p>
    </div>
  </div>


</body>

</html>
